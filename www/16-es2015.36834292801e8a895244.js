(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{ZC5C:function(l,n,a){"use strict";a.r(n);var t=a("8Y7J"),o=a("mrSG"),u=a("Z6yl"),e=a("Bu0p");class r{constructor(l,n,a,t,o,u,e){this.router=l,this.activatedRoute=n,this.apiService=a,this.platform=t,this.sessionManager=o,this.storage=u,this.toastController=e}ionViewDidEnter(){this.platform.ready().then(()=>{this.loadGranjas()})}loadGranjas(){return o.a(this,void 0,void 0,(function*(){yield this.apiService.showLoading(),this.apiService.get("tables/empresa-granjas/"+this.empresaId+"/get-all/").subscribe(l=>{this.granjasData=l.data,this.granjasDataCount=l.data.length,this.granjasDataAll=l.data,this.granjasDataAllCount=l.data.length,this.storage.set("granjasApiCache-"+this.empresaId,this.granjasData),this.apiService.dismissLoading()},l=>{this.storage.get("granjasApiCache-"+this.empresaId).then(l=>{console.log("cacheData"),console.log(l),null!=l?(this.presentToast("Sin coneccion, usando cache."),this.granjasData=l,this.granjasDataCount=this.granjasData.length,this.granjasDataAllCount=l,this.granjasDataAllCount=this.granjasData.length):this.presentToast("Sin cache de datos de granjas.")},l=>{this.presentToast("Sin cache de datos de granjas.")}),this.apiService.dismissLoading(),console.log("No connection to Api on GranjasData"),console.log(l)})}))}presentToast(l){return o.a(this,void 0,void 0,(function*(){(yield this.toastController.create({message:l,duration:3e3})).present()}))}ngOnInit(){this.activatedRoute.paramMap.subscribe(l=>{l.has("empresaId")?(this.empresaId=l.get("empresaId"),this.empresaNombre=this.sessionManager.appVarsHelper.get("empresaNombre")):this.empresaId=""})}filterData(l){let n=l.target.value;n&&""!==n?(n=n.toLowerCase(),this.granjasData=this.granjasDataAll.filter(l=>`${l.granja_nombre}`.toLowerCase().indexOf(n)>-1)):this.granjasData=this.granjasDataAll}setNextVars(l,n){this.sessionManager.appVarsHelper.set("granjaId",l),this.sessionManager.appVarsHelper.set("granjaNombre",n),this.router.navigate(["/estudios/"+this.empresaId+"/"+l])}}class i{}var s=a("pMnS"),b=a("MKJQ"),c=a("sZkV"),h=a("s7LF"),p=a("SVse"),g=a("iInd"),d=a("xgBC"),m=t.nb({encapsulation:0,styles:[[""]],data:{}});function j(l){return t.Gb(0,[(l()(),t.pb(0,0,null,null,9,"ion-card",[["type","button"]],null,[[null,"click"]],(function(l,n,a){var t=!0;return"click"===n&&(t=!1!==l.component.setNextVars(l.context.$implicit.granja_id,l.context.$implicit.granja_nombre)&&t),t}),b.K,b.d)),t.ob(1,49152,null,0,c.l,[t.h,t.k,t.x],{type:[0,"type"]},null),(l()(),t.pb(2,0,null,0,7,"ion-card-header",[],null,null,null,b.H,b.f)),t.ob(3,49152,null,0,c.n,[t.h,t.k,t.x],null,null),(l()(),t.pb(4,0,null,0,2,"ion-card-subtitle",[],null,null,null,b.I,b.g)),t.ob(5,49152,null,0,c.o,[t.h,t.k,t.x],null,null),(l()(),t.Fb(6,0,["ID: ",""])),(l()(),t.pb(7,0,null,0,2,"ion-card-title",[],null,null,null,b.J,b.h)),t.ob(8,49152,null,0,c.p,[t.h,t.k,t.x],null,null),(l()(),t.Fb(9,0,["",""]))],(function(l,n){l(n,1,0,"button")}),(function(l,n){l(n,6,0,n.context.$implicit.granja_id),l(n,9,0,n.context.$implicit.granja_nombre)}))}function k(l){return t.Gb(0,[(l()(),t.pb(0,0,null,null,10,"ion-header",[],null,null,null,b.Q,b.n)),t.ob(1,49152,null,0,c.A,[t.h,t.k,t.x],null,null),(l()(),t.pb(2,0,null,0,8,"ion-toolbar",[["color","primary"]],null,null,null,b.fb,b.C)),t.ob(3,49152,null,0,c.yb,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.pb(4,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,b.F,b.c)),t.ob(5,49152,null,0,c.k,[t.h,t.k,t.x],null,null),(l()(),t.pb(6,0,null,0,1,"ion-menu-button",[],null,null,null,b.X,b.v)),t.ob(7,49152,null,0,c.Q,[t.h,t.k,t.x],null,null),(l()(),t.pb(8,0,null,0,2,"ion-title",[["color","light"]],null,null,null,b.eb,b.B)),t.ob(9,49152,null,0,c.wb,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.Fb(-1,0,["iPig Nutritec"])),(l()(),t.pb(11,0,null,null,11,"ion-content",[["color","light"]],null,null,null,b.M,b.j)),t.ob(12,49152,null,0,c.t,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.pb(13,0,null,0,1,"h2",[["class","ion-padding-start"]],null,null,null,null,null)),(l()(),t.Fb(-1,null,["Granjas"])),(l()(),t.pb(15,0,null,0,1,"h4",[["class","ion-padding-start"]],null,null,null,null,null)),(l()(),t.Fb(16,null,["",""])),(l()(),t.pb(17,0,null,0,3,"ion-searchbar",[["placeholder","Buscar"]],null,[[null,"ionInput"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,a){var o=!0,u=l.component;return"ionBlur"===n&&(o=!1!==t.Ab(l,20)._handleBlurEvent(a.target)&&o),"ionChange"===n&&(o=!1!==t.Ab(l,20)._handleInputEvent(a.target)&&o),"ionInput"===n&&(o=!1!==u.filterData(a)&&o),o}),b.ab,b.x)),t.Cb(5120,null,h.c,(function(l){return[l]}),[c.Kb]),t.ob(19,49152,null,0,c.gb,[t.h,t.k,t.x],{placeholder:[0,"placeholder"]},null),t.ob(20,16384,null,0,c.Kb,[t.k],null,null),(l()(),t.eb(16777216,null,0,1,null,j)),t.ob(22,278528,null,0,p.h,[t.M,t.J,t.q],{ngForOf:[0,"ngForOf"]},null),(l()(),t.pb(23,0,null,null,10,"ion-footer",[],null,null,null,b.P,b.m)),t.ob(24,49152,null,0,c.y,[t.h,t.k,t.x],null,null),(l()(),t.pb(25,0,null,0,8,"ion-fab",[["horizontal","start"],["vertical","bottom"]],null,null,null,b.O,b.k)),t.ob(26,49152,null,0,c.v,[t.h,t.k,t.x],{horizontal:[0,"horizontal"],vertical:[1,"vertical"]},null),(l()(),t.pb(27,0,null,0,6,"ion-fab-button",[["color","medium"],["type","button"]],null,[[null,"click"]],(function(l,n,a){var o=!0;return"click"===n&&(o=!1!==t.Ab(l,29).onClick()&&o),"click"===n&&(o=!1!==t.Ab(l,31).onClick(a)&&o),o}),b.N,b.l)),t.ob(28,49152,null,0,c.w,[t.h,t.k,t.x],{color:[0,"color"],type:[1,"type"]},null),t.ob(29,16384,null,0,g.n,[g.m,g.a,[8,null],t.B,t.k],{routerLink:[0,"routerLink"]},null),t.Bb(30,1),t.ob(31,737280,null,0,c.Ib,[p.g,c.Eb,t.k,g.m,[2,g.n]],null,null),(l()(),t.pb(32,0,null,0,1,"ion-icon",[["name","arrow-back"]],null,null,null,b.R,b.o)),t.ob(33,49152,null,0,c.B,[t.h,t.k,t.x],{name:[0,"name"]},null)],(function(l,n){var a=n.component;l(n,3,0,"primary"),l(n,9,0,"light"),l(n,12,0,"light"),l(n,19,0,"Buscar"),l(n,22,0,a.granjasData),l(n,26,0,"start","bottom"),l(n,28,0,"medium","button");var t=l(n,30,0,"/home/");l(n,29,0,t),l(n,31,0),l(n,33,0,"arrow-back")}),(function(l,n){l(n,16,0,n.component.empresaNombre)}))}function f(l){return t.Gb(0,[(l()(),t.pb(0,0,null,null,1,"app-granjas",[],null,null,null,k,m)),t.ob(1,114688,null,0,r,[g.m,g.a,e.a,c.Gb,u.a,d.b,c.Lb],null,null)],(function(l,n){l(n,1,0)}),null)}var v=t.lb("app-granjas",r,f,{},{},[]);a.d(n,"GranjasPageModuleNgFactory",(function(){return y}));var y=t.mb(i,[],(function(l){return t.xb([t.yb(512,t.j,t.X,[[8,[s.a,v]],[3,t.j],t.v]),t.yb(4608,p.k,p.j,[t.s,[2,p.q]]),t.yb(4608,h.j,h.j,[]),t.yb(4608,c.b,c.b,[t.x,t.g]),t.yb(4608,c.Db,c.Db,[c.b,t.j,t.p]),t.yb(4608,c.Hb,c.Hb,[c.b,t.j,t.p]),t.yb(1073742336,p.b,p.b,[]),t.yb(1073742336,h.i,h.i,[]),t.yb(1073742336,h.b,h.b,[]),t.yb(1073742336,c.Ab,c.Ab,[]),t.yb(1073742336,g.o,g.o,[[2,g.t],[2,g.m]]),t.yb(1073742336,i,i,[]),t.yb(1024,g.k,(function(){return[[{path:"",component:r}]]}),[])])}))}}]);