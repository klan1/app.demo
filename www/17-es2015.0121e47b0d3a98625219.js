(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{L6id:function(l,n,e){"use strict";e.r(n);var t=e("8Y7J");class a{}var o=e("pMnS"),s=e("MKJQ"),i=e("sZkV"),r=e("s7LF"),u=e("SVse"),b=e("mrSG"),p=e("Z6yl"),c=e("Bu0p"),h=e("ZXCZ");class m{constructor(l,n,e,t,a,o,s){this.apiService=l,this.platform=n,this.sessionManager=e,this.router=t,this.varConfig=a,this.storage=o,this.toastController=s}loadEmpresas(){return b.a(this,void 0,void 0,(function*(){yield this.apiService.showLoading(),this.apiService.get("tables/empresas/?get-query-filter=%7B%22estado%22%3A0%7D").subscribe(l=>{this.empresasData=l.data,this.empresasDataCount=l.data.length,this.empresasDataAll=l.data,this.empresasDataAllCount=l.data.length,this.storage.set("empresasApiCache",this.empresasData),this.apiService.dismissLoading()},l=>{this.storage.get("empresasApiCache").then(l=>{console.log("cacheData"),console.log(l),null!=l?(this.presentToast("Sin coneccion, usando cache."),this.empresasData=l,this.empresasDataCount=this.empresasData.length,this.empresasDataAllCount=l,this.empresasDataAllCount=this.empresasData.length):this.presentToast("Sin cache de datos de empresa.")},l=>{this.presentToast("Sin cache de datos de empresa.")}),this.apiService.dismissLoading(),console.log("No connection to Api on EmpresasData"),console.log(l)})}))}presentToast(l){return b.a(this,void 0,void 0,(function*(){(yield this.toastController.create({message:l,duration:3e3})).present()}))}ionViewDidEnter(){this.platform.ready().then(()=>{this.loadEmpresas()})}filterData(l){let n=l.target.value;n&&""!==n?(n=n.toLowerCase(),this.empresasData=this.empresasDataAll.filter(l=>`${l.razon_social} ${l.nombre_empresa}`.toLowerCase().indexOf(n)>-1)):this.empresasData=this.empresasDataAll}setNextVars(l,n){this.sessionManager.appVarsHelper.set("empresaId",l),this.sessionManager.appVarsHelper.set("empresaNombre",n),this.router.navigate(["/granjas/"+l])}}var d=e("iInd"),g=e("xgBC"),f=t.nb({encapsulation:0,styles:[[".welcome-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:35vh;overflow:hidden}"]],data:{}});function y(l){return t.Gb(0,[(l()(),t.pb(0,0,null,null,9,"ion-card",[["color",""],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.setNextVars(l.context.$implicit.empresa_id,l.context.$implicit.nombre_empresa)&&t),t}),s.K,s.d)),t.ob(1,49152,null,0,i.l,[t.h,t.k,t.x],{color:[0,"color"],type:[1,"type"]},null),(l()(),t.pb(2,0,null,0,7,"ion-card-header",[],null,null,null,s.H,s.f)),t.ob(3,49152,null,0,i.n,[t.h,t.k,t.x],null,null),(l()(),t.pb(4,0,null,0,2,"ion-card-subtitle",[],null,null,null,s.I,s.g)),t.ob(5,49152,null,0,i.o,[t.h,t.k,t.x],null,null),(l()(),t.Fb(6,0,["",""])),(l()(),t.pb(7,0,null,0,2,"ion-card-title",[],null,null,null,s.J,s.h)),t.ob(8,49152,null,0,i.p,[t.h,t.k,t.x],null,null),(l()(),t.Fb(9,0,["",""]))],(function(l,n){l(n,1,0,"","button")}),(function(l,n){l(n,6,0,n.context.$implicit.razon_social),l(n,9,0,n.context.$implicit.nombre_empresa)}))}function v(l){return t.Gb(0,[(l()(),t.pb(0,0,null,null,10,"ion-header",[],null,null,null,s.Q,s.n)),t.ob(1,49152,null,0,i.A,[t.h,t.k,t.x],null,null),(l()(),t.pb(2,0,null,0,8,"ion-toolbar",[["color","primary"]],null,null,null,s.fb,s.C)),t.ob(3,49152,null,0,i.yb,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.pb(4,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,s.F,s.c)),t.ob(5,49152,null,0,i.k,[t.h,t.k,t.x],null,null),(l()(),t.pb(6,0,null,0,1,"ion-menu-button",[],null,null,null,s.X,s.v)),t.ob(7,49152,null,0,i.Q,[t.h,t.k,t.x],null,null),(l()(),t.pb(8,0,null,0,2,"ion-title",[["color","light"]],null,null,null,s.eb,s.B)),t.ob(9,49152,null,0,i.wb,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.Fb(-1,0,["iPig Nutritec"])),(l()(),t.pb(11,0,null,null,9,"ion-content",[["color","light"]],null,null,null,s.M,s.j)),t.ob(12,49152,null,0,i.t,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.pb(13,0,null,0,1,"h2",[["class","ion-padding-start"]],null,null,null,null,null)),(l()(),t.Fb(-1,null,["Clientes"])),(l()(),t.pb(15,0,null,0,3,"ion-searchbar",[["placeholder","Buscar"]],null,[[null,"ionInput"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,e){var a=!0,o=l.component;return"ionBlur"===n&&(a=!1!==t.Ab(l,18)._handleBlurEvent(e.target)&&a),"ionChange"===n&&(a=!1!==t.Ab(l,18)._handleInputEvent(e.target)&&a),"ionInput"===n&&(a=!1!==o.filterData(e)&&a),a}),s.ab,s.x)),t.Cb(5120,null,r.c,(function(l){return[l]}),[i.Kb]),t.ob(17,49152,null,0,i.gb,[t.h,t.k,t.x],{disabled:[0,"disabled"],placeholder:[1,"placeholder"]},null),t.ob(18,16384,null,0,i.Kb,[t.k],null,null),(l()(),t.eb(16777216,null,0,1,null,y)),t.ob(20,278528,null,0,u.h,[t.M,t.J,t.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var e=n.component;l(n,3,0,"primary"),l(n,9,0,"light"),l(n,12,0,"light"),l(n,17,0,null==e.empresasData,"Buscar"),l(n,20,0,e.empresasData)}),null)}function D(l){return t.Gb(0,[(l()(),t.pb(0,0,null,null,1,"app-home",[],null,null,null,v,f)),t.ob(1,49152,null,0,m,[c.a,i.Gb,p.a,d.m,h.b,g.b,i.Lb],null,null)],null,null)}var x=t.lb("app-home",m,D,{},{},[]);e.d(n,"HomePageModuleNgFactory",(function(){return C}));var C=t.mb(a,[],(function(l){return t.xb([t.yb(512,t.j,t.X,[[8,[o.a,x]],[3,t.j],t.v]),t.yb(4608,u.k,u.j,[t.s,[2,u.q]]),t.yb(4608,r.j,r.j,[]),t.yb(4608,i.b,i.b,[t.x,t.g]),t.yb(4608,i.Db,i.Db,[i.b,t.j,t.p]),t.yb(4608,i.Hb,i.Hb,[i.b,t.j,t.p]),t.yb(4608,h.b,h.b,[]),t.yb(1073742336,u.b,u.b,[]),t.yb(1073742336,r.i,r.i,[]),t.yb(1073742336,r.b,r.b,[]),t.yb(1073742336,i.Ab,i.Ab,[]),t.yb(1073742336,d.o,d.o,[[2,d.t],[2,d.m]]),t.yb(1073742336,a,a,[]),t.yb(1024,d.k,(function(){return[[{path:"",component:m}]]}),[])])}))}}]);