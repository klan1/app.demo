function _classCallCheck(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,l){for(var a=0;a<l.length;a++){var t=l[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function _createClass(n,l,a){return l&&_defineProperties(n.prototype,l),a&&_defineProperties(n,a),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{ZC5C:function(n,l,a){"use strict";a.r(l);var t=a("8Y7J"),e=a("mrSG"),o=a("Z6yl"),r=a("Bu0p"),u=function(){function n(l,a,t,e,o,r,u){_classCallCheck(this,n),this.router=l,this.activatedRoute=a,this.apiService=t,this.platform=e,this.sessionManager=o,this.storage=r,this.toastController=u}return _createClass(n,[{key:"ionViewDidEnter",value:function(){var n=this;this.platform.ready().then((function(){n.loadGranjas()}))}},{key:"loadGranjas",value:function(){return e.a(this,void 0,void 0,regeneratorRuntime.mark((function n(){var l=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.apiService.showLoading();case 2:this.apiService.get("tables/empresa-granjas/"+this.empresaId+"/get-all/").subscribe((function(n){l.granjasData=n.data,l.granjasDataCount=n.data.length,l.granjasDataAll=n.data,l.granjasDataAllCount=n.data.length,l.storage.set("granjasApiCache-"+l.empresaId,l.granjasData),l.apiService.dismissLoading()}),(function(n){l.storage.get("granjasApiCache-"+l.empresaId).then((function(n){console.log("cacheData"),console.log(n),null!=n?(l.presentToast("Sin coneccion, usando cache."),l.granjasData=n,l.granjasDataCount=l.granjasData.length,l.granjasDataAllCount=n,l.granjasDataAllCount=l.granjasData.length):l.presentToast("Sin cache de datos de granjas.")}),(function(n){l.presentToast("Sin cache de datos de granjas.")})),l.apiService.dismissLoading(),console.log("No connection to Api on GranjasData"),console.log(n)}));case 3:case"end":return n.stop()}}),n,this)})))}},{key:"presentToast",value:function(n){return e.a(this,void 0,void 0,regeneratorRuntime.mark((function l(){return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.toastController.create({message:n,duration:3e3});case 2:l.sent.present();case 3:case"end":return l.stop()}}),l,this)})))}},{key:"ngOnInit",value:function(){var n=this;this.activatedRoute.paramMap.subscribe((function(l){l.has("empresaId")?(n.empresaId=l.get("empresaId"),n.empresaNombre=n.sessionManager.appVarsHelper.get("empresaNombre")):n.empresaId=""}))}},{key:"filterData",value:function(n){var l=n.target.value;l&&""!==l?(l=l.toLowerCase(),this.granjasData=this.granjasDataAll.filter((function(n){return"".concat(n.granja_nombre).toLowerCase().indexOf(l)>-1}))):this.granjasData=this.granjasDataAll}},{key:"setNextVars",value:function(n,l){this.sessionManager.appVarsHelper.set("granjaId",n),this.sessionManager.appVarsHelper.set("granjaNombre",l),this.router.navigate(["/estudios/"+this.empresaId+"/"+n])}}]),n}(),i=function n(){_classCallCheck(this,n)},s=a("pMnS"),c=a("MKJQ"),b=a("sZkV"),p=a("s7LF"),h=a("SVse"),g=a("iInd"),d=a("xgBC"),f=t.nb({encapsulation:0,styles:[[""]],data:{}});function m(n){return t.Gb(0,[(n()(),t.pb(0,0,null,null,9,"ion-card",[["type","button"]],null,[[null,"click"]],(function(n,l,a){var t=!0;return"click"===l&&(t=!1!==n.component.setNextVars(n.context.$implicit.granja_id,n.context.$implicit.granja_nombre)&&t),t}),c.K,c.d)),t.ob(1,49152,null,0,b.l,[t.h,t.k,t.x],{type:[0,"type"]},null),(n()(),t.pb(2,0,null,0,7,"ion-card-header",[],null,null,null,c.H,c.f)),t.ob(3,49152,null,0,b.n,[t.h,t.k,t.x],null,null),(n()(),t.pb(4,0,null,0,2,"ion-card-subtitle",[],null,null,null,c.I,c.g)),t.ob(5,49152,null,0,b.o,[t.h,t.k,t.x],null,null),(n()(),t.Fb(6,0,["ID: ",""])),(n()(),t.pb(7,0,null,0,2,"ion-card-title",[],null,null,null,c.J,c.h)),t.ob(8,49152,null,0,b.p,[t.h,t.k,t.x],null,null),(n()(),t.Fb(9,0,["",""]))],(function(n,l){n(l,1,0,"button")}),(function(n,l){n(l,6,0,l.context.$implicit.granja_id),n(l,9,0,l.context.$implicit.granja_nombre)}))}function k(n){return t.Gb(0,[(n()(),t.pb(0,0,null,null,10,"ion-header",[],null,null,null,c.Q,c.n)),t.ob(1,49152,null,0,b.A,[t.h,t.k,t.x],null,null),(n()(),t.pb(2,0,null,0,8,"ion-toolbar",[["color","primary"]],null,null,null,c.fb,c.C)),t.ob(3,49152,null,0,b.yb,[t.h,t.k,t.x],{color:[0,"color"]},null),(n()(),t.pb(4,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,c.F,c.c)),t.ob(5,49152,null,0,b.k,[t.h,t.k,t.x],null,null),(n()(),t.pb(6,0,null,0,1,"ion-menu-button",[],null,null,null,c.X,c.v)),t.ob(7,49152,null,0,b.Q,[t.h,t.k,t.x],null,null),(n()(),t.pb(8,0,null,0,2,"ion-title",[["color","light"]],null,null,null,c.eb,c.B)),t.ob(9,49152,null,0,b.wb,[t.h,t.k,t.x],{color:[0,"color"]},null),(n()(),t.Fb(-1,0,["iPig Nutritec"])),(n()(),t.pb(11,0,null,null,11,"ion-content",[["color","light"]],null,null,null,c.M,c.j)),t.ob(12,49152,null,0,b.t,[t.h,t.k,t.x],{color:[0,"color"]},null),(n()(),t.pb(13,0,null,0,1,"h2",[["class","ion-padding-start"]],null,null,null,null,null)),(n()(),t.Fb(-1,null,["Granjas"])),(n()(),t.pb(15,0,null,0,1,"h4",[["class","ion-padding-start"]],null,null,null,null,null)),(n()(),t.Fb(16,null,["",""])),(n()(),t.pb(17,0,null,0,3,"ion-searchbar",[["placeholder","Buscar"]],null,[[null,"ionInput"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,a){var e=!0,o=n.component;return"ionBlur"===l&&(e=!1!==t.Ab(n,20)._handleBlurEvent(a.target)&&e),"ionChange"===l&&(e=!1!==t.Ab(n,20)._handleInputEvent(a.target)&&e),"ionInput"===l&&(e=!1!==o.filterData(a)&&e),e}),c.ab,c.x)),t.Cb(5120,null,p.c,(function(n){return[n]}),[b.Kb]),t.ob(19,49152,null,0,b.gb,[t.h,t.k,t.x],{placeholder:[0,"placeholder"]},null),t.ob(20,16384,null,0,b.Kb,[t.k],null,null),(n()(),t.eb(16777216,null,0,1,null,m)),t.ob(22,278528,null,0,h.h,[t.M,t.J,t.q],{ngForOf:[0,"ngForOf"]},null),(n()(),t.pb(23,0,null,null,10,"ion-footer",[],null,null,null,c.P,c.m)),t.ob(24,49152,null,0,b.y,[t.h,t.k,t.x],null,null),(n()(),t.pb(25,0,null,0,8,"ion-fab",[["horizontal","start"],["vertical","bottom"]],null,null,null,c.O,c.k)),t.ob(26,49152,null,0,b.v,[t.h,t.k,t.x],{horizontal:[0,"horizontal"],vertical:[1,"vertical"]},null),(n()(),t.pb(27,0,null,0,6,"ion-fab-button",[["color","medium"],["type","button"]],null,[[null,"click"]],(function(n,l,a){var e=!0;return"click"===l&&(e=!1!==t.Ab(n,29).onClick()&&e),"click"===l&&(e=!1!==t.Ab(n,31).onClick(a)&&e),e}),c.N,c.l)),t.ob(28,49152,null,0,b.w,[t.h,t.k,t.x],{color:[0,"color"],type:[1,"type"]},null),t.ob(29,16384,null,0,g.n,[g.m,g.a,[8,null],t.B,t.k],{routerLink:[0,"routerLink"]},null),t.Bb(30,1),t.ob(31,737280,null,0,b.Ib,[h.g,b.Eb,t.k,g.m,[2,g.n]],null,null),(n()(),t.pb(32,0,null,0,1,"ion-icon",[["name","arrow-back"]],null,null,null,c.R,c.o)),t.ob(33,49152,null,0,b.B,[t.h,t.k,t.x],{name:[0,"name"]},null)],(function(n,l){var a=l.component;n(l,3,0,"primary"),n(l,9,0,"light"),n(l,12,0,"light"),n(l,19,0,"Buscar"),n(l,22,0,a.granjasData),n(l,26,0,"start","bottom"),n(l,28,0,"medium","button");var t=n(l,30,0,"/home/");n(l,29,0,t),n(l,31,0),n(l,33,0,"arrow-back")}),(function(n,l){n(l,16,0,l.component.empresaNombre)}))}var j=t.lb("app-granjas",u,(function(n){return t.Gb(0,[(n()(),t.pb(0,0,null,null,1,"app-granjas",[],null,null,null,k,f)),t.ob(1,114688,null,0,u,[g.m,g.a,r.a,b.Gb,o.a,d.b,b.Lb],null,null)],(function(n,l){n(l,1,0)}),null)}),{},{},[]);a.d(l,"GranjasPageModuleNgFactory",(function(){return v}));var v=t.mb(i,[],(function(n){return t.xb([t.yb(512,t.j,t.X,[[8,[s.a,j]],[3,t.j],t.v]),t.yb(4608,h.k,h.j,[t.s,[2,h.q]]),t.yb(4608,p.j,p.j,[]),t.yb(4608,b.b,b.b,[t.x,t.g]),t.yb(4608,b.Db,b.Db,[b.b,t.j,t.p]),t.yb(4608,b.Hb,b.Hb,[b.b,t.j,t.p]),t.yb(1073742336,h.b,h.b,[]),t.yb(1073742336,p.i,p.i,[]),t.yb(1073742336,p.b,p.b,[]),t.yb(1073742336,b.Ab,b.Ab,[]),t.yb(1073742336,g.o,g.o,[[2,g.t],[2,g.m]]),t.yb(1073742336,i,i,[]),t.yb(1024,g.k,(function(){return[[{path:"",component:u}]]}),[])])}))}}]);